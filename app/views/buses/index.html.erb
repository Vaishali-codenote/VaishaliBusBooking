<% if @route.buses.any? %>
  <h3>Total Buses in this Route (<%= @route.buses.count %>)</h3>
  
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>Bus Id</th>
          <th>Name</th>
          <th>Bus Number</th>
          <th>Bus Type</th>
          <th>Bus Price</th>
          <th>Seats </th>
          <th>Pickup Point</th>
          <th>Drop Point</th>
          <th>Departure Time</th>
          <th>Arrival Time</th>
          <% if current_user.try(:admin?)  %>
            <th>Availability</th>
          <% end %>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% @buses.each do |bus| %>
          <tr>
            <td><%= bus.id %></td>
            <td><%= bus.name %></td>
            <td><%= bus.number %></td>
            <td><%= bus.bustype %></td>
            <td><%= bus.price %></td>
            <td><%= bus.seats %></td>
            
            <% if bus.departure_time.present? && bus.arrival_time.present? %>
              <td><%= bus.departure_time.strftime('%H:%M') %></td>
              <td><%= bus.arrival_time.strftime('%H:%M') %></td>
            <% else %>
              <td><%= bus.departure_time %></td>
              <td><%= bus.arrival_time %></td>
            <% end %>
        <% end %>
    </tbody>
  </table>
</div>

<div >
  <%=link_to "Back", root_path %>
</div>
<% else %>
  <h1>No Bus found in this Route</h1>
  <%= link_to "Back", :back%>
<% end %>
